<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Controle Financeiro Pessoal</title>

  <!-- PWA -->
  <meta name="theme-color" content="#1e293b" />
  <link rel="manifest" href="manifest.json" />

  <!-- Estilo -->
  <link rel="stylesheet" href="style.css" />

  <link rel="apple-touch-icon" href="icons/icon-192.png">
</head>
<body>

  <!-- =====================================================
       TELA DE LOGIN (NOVO)
  ====================================================== -->
  <div id="login-screen" class="login-container">

    <div class="login-box">
      <h1>üí∞ Controle Financeiro</h1>
      <p class="subtitle">Acesso ao sistema</p>

      <form id="loginForm">
        <label>Usu√°rio</label>
        <input type="text" id="login" required />

        <label>Senha</label>
        <input type="password" id="senha" required />

        <button type="submit" class="btn-primario">Entrar</button>

        <p id="loginError" class="login-error hidden"></p>
      </form>
    </div>

  </div>

  <!-- =====================================================
       APLICA√á√ÉO (ORIGINAL ‚Äì AGORA ENVOLVIDA)
  ====================================================== -->
  <div id="app" class="hidden">
  <!-- =====================================================
    HEADER + APP BAR (MOBILE FIRST)
    ===================================================== -->
    <header class="app-header">

      <div class="app-bar">

        <!-- Bot√£o menu (mobile) -->
        <button id="btnMenu" class="btn-menu" aria-label="Abrir menu">
          ‚ò∞
        </button>

        <!-- T√≠tulo -->
        <div class="app-title">
          <h1>üí∞ Controle Financeiro</h1>
          <span id="periodoAtual"></span>
        </div>

      </div>

    </header>

    <!-- =====================================================
    MENU LATERAL (DRAWER MOBILE)
    ===================================================== -->
    <div id="menuOverlay" class="menu-overlay hidden"></div>

    <aside id="sideMenu" class="side-menu">

      <nav class="side-menu-nav">

        <button class="side-link active" data-tab="resumo">
          ‚è± <span>Resumo</span>
        </button>

        <button class="side-link" data-tab="nova-despesa">
          ‚ûï <span>Nova Despesa</span>
        </button>


        <button class="side-link" data-tab="lancamentos">
          üí≥ <span>Lan√ßamentos</span>
        </button>

        <button class="side-link" data-tab="futuros">
          üßæ <span>Lan√ßamentos Futuros</span>
        </button>

        <button class="side-link" data-tab="contas">
          üí≥ <span>Contas</span>
        </button>

        <button class="side-link" data-tab="resumo-geral">
          üìä <span>Resumo Geral</span>
        </button>

      </nav>

      <div class="side-menu-footer">
        <span class="usuario-logado">üë§ Usu√°rio logado</span>
      </div>

    </aside>
    
    <!-- =====================================================
         ABA: RESUMO
    ====================================================== -->
    <main id="tab-resumo" class="tab-content active">

      <section class="resumo-pagamentos">

        <div class="coluna">
          <h3>D√©bito</h3>
          <div id="cards-debito" class="cards-coluna"></div>
        </div>

        <div class="coluna">
          <h3>Cr√©dito</h3>
          <div id="cards-credito" class="cards-coluna"></div>
        </div>

        <div class="coluna">
          <h3>Pix / TED (Entradas)</h3>
          <div id="cards-pix-entrada" class="cards-coluna"></div>
        </div>

        <div class="coluna">
          <h3>Pix / TED (Sa√≠das)</h3>
          <div id="cards-pix-saida" class="cards-coluna"></div>
        </div>

      </section>

    </main>

    <!-- =====================================================
     ABA: CONTAS
    ====================================================== -->
    <main id="tab-contas" class="tab-content">

      <section class="tabela-box">
        <h2>üè¶ Manuten√ß√£o de Contas</h2>

        <div class="tabela-wrapper">
          <table id="tabelaContas" class="tabela-analitica">
            <thead>
              <tr>
                <th>Nome</th>
                <th>Ativo</th>
                <th>Bandeira</th>
                <th>Skin</th>
                <th>Resumo</th>
                <th>Ordem</th>
                <th>A√ß√£o</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>

    </main>

    <!-- =====================================================
         ABA: RESUMO GERAL
    ====================================================== -->
    <main id="tab-resumo-geral" class="tab-content">
      <section class="resumo-geral">
        <div id="cards-resumo-geral" class="cards-resumo-geral"></div>
      </section>
    </main>

    <!-- =====================================================
         ABA: LAN√áAMENTOS
    ====================================================== -->
    <main id="tab-lancamentos" class="tab-content">

      <section class="tabela-box">
        <h2>üìä Gastos por Categoria √ó M√™s</h2>

        <div class="tabela-wrapper">
          <table id="tabelaCategoriaMes" class="tabela-analitica">
            <thead>
              <tr>
                <th>Categoria</th>
                <th>Jan</th><th>Fev</th><th>Mar</th><th>Abr</th>
                <th>Mai</th><th>Jun</th><th>Jul</th><th>Ago</th>
                <th>Set</th><th>Out</th><th>Nov</th><th>Dez</th>
                <th>Total</th>
              </tr>
            </thead>
            <tbody></tbody>
            <tfoot>
              <tr>
                <th>Total</th>
                <th colspan="12"></th>
                <th></th>
              </tr>
            </tfoot>
          </table>
        </div>
      </section>

      <section class="tabela-box">
        <h2>üí≥ Gastos por Categoria √ó Tipo de Pagamento</h2>

        <div class="tabela-wrapper">
          <table id="tabelaCategoriaTipo" class="tabela-analitica">
            <thead>
              <tr>
                <th>Categoria</th>
                <th>D√©bito</th>
                <th>Cr√©dito</th>
                <th>Pix / TED</th>
                <th>Total</th>
              </tr>
            </thead>
            <tbody></tbody>
            <tfoot>
              <tr>
                <th>Total</th>
                <th></th><th></th><th></th><th></th>
              </tr>
            </tfoot>
          </table>
        </div>
      </section>

      <!-- ‚úÖ NOVA TABELA: ENTRADAS -->
      <section class="tabela-box">
        <h2>üí∞ Entradas √ó Tipo de Recebimento</h2>

        <div class="tabela-wrapper">
          <table id="tabelaEntradasTipo" class="tabela-analitica">
            <thead>
              <tr>
                <th>Categoria</th>
                <th>Pix</th>
                <th>TED</th>
                <th>Dinheiro</th>
                <th>Total</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>

    </main>

    <!-- =====================================================
     ABA: LAN√áAMENTOS FUTUROS
    ====================================================== -->
    <main id="tab-futuros" class="tab-content">

      <section class="tabela-box">

        <h2>‚è≥ Lan√ßamentos Futuros</h2>

        <!-- FILTROS + A√á√ïES -->
        <div class="filtros-futuros-wrapper">

          <!-- FILTROS -->
          <div class="filtros-futuros">

            <div>
              <label>M√™s</label>
              <select id="filtroMesFuturo">
                <option value="">Todos</option>
                <option value="0">Jan</option>
                <option value="1">Fev</option>
                <option value="2">Mar</option>
                <option value="3">Abr</option>
                <option value="4">Mai</option>
                <option value="5">Jun</option>
                <option value="6">Jul</option>
                <option value="7">Ago</option>
                <option value="8">Set</option>
                <option value="9">Out</option>
                <option value="10">Nov</option>
                <option value="11">Dez</option>
              </select>
            </div>

            <div>
              <label>Ano</label>
              <select id="filtroAnoFuturo"></select>
            </div>

            <div>
              <label>Conta</label>
              <select id="filtroContaFuturo">
                <option value="">Todas</option>
              </select>
            </div>

            <button id="btnLimparFiltrosFuturo">Limpar</button>
          </div>

          <!-- A√á√ÉO EM LOTE -->
          <div class="acoes-futuros">
            <button
              id="btnPagarTudo"
              class="btn-primario btn-consolidar"
              disabled
              title="Use os filtros para habilitar"
              
            >
              üí≥ Consolidar Despesas
            </button>
          </div>

        </div>

        <!-- TABELA -->
        <div class="tabela-wrapper">
          <table id="tabelaLancamentosFuturos" class="tabela-analitica">
            <thead>
              <tr>
                <th>Vencimento</th>
                <th>Categoria</th>
                <th>Conta</th>
                <th>Valor</th>
                <th>A√ß√£o</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

      </section>

    </main>


    <!-- =====================================================
         ABA: NOVA DESPESA
    ====================================================== -->
    <main id="tab-nova-despesa" class="tab-content">

      <section class="form-box">
        <h2>Registrar Lan√ßamento</h2>

        <form id="formLancamento">

          <label>Tipo</label>
          <select id="tipo" required>
            <option value="SAIDA">Despesa</option>
            <option value="ENTRADA">Entrada</option>
          </select>

          <label>Categoria</label>
          <select id="categoria" required></select>

          <label>Subcategoria</label>
          <select id="subcategoria" required></select>

          <label>Conta (Banco)</label>
          <select id="conta" required></select>

          <label>Forma de Pagamento/Recebimento</label>
          <select id="pagamento" required></select>

          <label>Valor</label>
          <input type="number" id="valor" step="0.01" required />

          <label>Data</label>
          <input type="date" id="data" required />

          <label class="check">
            <input type="checkbox" id="fixo" />
            Gasto fixo mensal
          </label>

          <label class="check">
            <input type="checkbox" id="parcelado" />
            Compra parcelada
          </label>

          <div id="campoParcelamento" class="hidden">

            <label>N¬∫ de parcelas</label>
            <input
              type="number"
              id="qtdParcelas"
              min="2"
              max="48"
              placeholder="Ex: 4"
            />

            <label>Valor de cada parcela</label>
            <input
              type="number"
              id="valorParcela"
              step="0.01"
              placeholder="Ex: 250,00"
            />

          </div>


          <label>Descri√ß√£o</label>
          <input type="text" id="descricao" />

          <div class="campo-checkbox">
            <label>
              <input type="checkbox" id="chk-futuro">
              Lan√ßamento futuro
            </label>
          </div>

          <button type="submit" class="btn-primario">Salvar</button>

        </form>
      </section>

    </main>

  </div>

  <!-- JS -->
  <script src="app.js"></script>

  <!-- REGISTRO DO SERVICE WORKER -->
  <script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/ControleFinanceiro/service-worker.js', {
        scope: '/ControleFinanceiro/'
      });
    });
  }
  </script>


</body>
</html>